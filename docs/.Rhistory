for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/fulldata new.csv")
library(readr)
library(data.table)
library(tidyverse)
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/fulldata"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/fulldata new.csv")
data <- read_csv("/Users/sunyufei/Desktop/ZZQ new.csv")
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/HNM"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/HNM new.csv")
View(data)
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/LYQ"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/LYQ new.csv")
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/MJL"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/MJL new.csv")
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/NT"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/NT new.csv")
View(data)
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/NT4101-8100.csv")
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/SJY"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/SJY new.csv")
View(data)
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/ZMS"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/ZMS new.csv")
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/ZM"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/fulldata"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
dir = "/Users/sunyufei/Desktop/weibo_label_studio/Labeled/fulldata"  # 搜索指定文件夹下文件，……填写为你的文件夹路径，注意使用/做目录分隔符
#获得csv文件列表
file_list = list.files(path = dir, pattern = "*.csv$",recursive = TRUE,full.names = TRUE)  #获得csv文件列表
#生成新的存储地址，用于csv文件存储。为dir的上层目录，也可以自行修改paste(dir,"new.csv")部分为绝对路径
store_csv = paste(dir,"new.csv")
n = 1
for(i in 1:length(file_list))     #循环绝对地址的列表
{
n = n + 1
df = fread(file = file_list[i],encoding = 'UTF-8')         #读取csv文件
#如果不存在csv文件则创建，追加写入新csv文件
write_csv(df,path = store_csv,append = TRUE, col_names = FALSE)
print(n)
}
data <- read_csv("/Users/sunyufei/Desktop/weibo_label_studio/Labeled/fulldata new.csv")
xaringan:::inf_mr()
remotes::install_github("yihui/xaringan")
xaringan:::inf_mr()
rticles::journals()
devtools::install_github("rstudio/rticles")
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan::moon_reader
set.seed(19970921)
if (!require(pacman)) install.packages("pacman")
library(pacman)
p_load(
'tidyverse',
'readr',
'quanteda',
'xlsx',
'Hmisc',
'qs',
'reticulate',
'stringr',
'mice',
'MASS',
'modelsummary',
'summarytools',
'gt',
'arm',
'pscl',
'dotwhisker'
)
set.seed(19970921)
fullData <- qread("/Users/sunyufei/Desktop/fullData.qs")
var_ls_retweetNum_rawpost <- "arm::rescale(rawpost_sentimentClassify) + arm::rescale(text_numb) + diff_EventTime_RawPostTime"
var_ls_retweetNum_retweetEmotional <- "arm::rescale(retweet_sentimentClassify) + Sentiment"
var_ls_retweetNum_retweetExpressive <- "retweetCensorship + discussPost + warWolf + dirty + retweetGender + arm::rescale(retweetDepth) + similarity + retweetCertification + arm::rescale(retweeterFansNum) + arm::rescale(retweeterFollowNum)"
var_ls_retweetNum_control <- "officalMediaName + officalMediaClassify + rawpostEvent + arm::rescale(retweetRetweetNum) + diff_rawPostTime_RetweetPostTime + retweetProvince + fullData$rawpostEventYear"
model_retweetNum_control <- paste0("rawRetweetNum ~ ", var_ls_retweetNum_control)
model_retweetNum_rawpost <- paste0("rawRetweetNum ~ ", var_ls_retweetNum_rawpost, " + ", var_ls_retweetNum_control)
model_retweetNum_retweetEmotional <- paste0("rawRetweetNum ~ ", var_ls_retweetNum_retweetEmotional, " + ", var_ls_retweetNum_control)
model_retweetNum_retweetExpressive <- paste0("rawRetweetNum ~ ", var_ls_retweetNum_retweetExpressive, " + ", var_ls_retweetNum_control)
model_retweetNum_retweet <- paste0("rawRetweetNum ~ ", var_ls_retweetNum_retweetEmotional, " + ", var_ls_retweetNum_retweetExpressive, " + ", var_ls_retweetNum_control)
model_retweetNum_full <- paste0("rawRetweetNum ~ ", var_ls_retweetNum_rawpost, "+", var_ls_retweetNum_retweetEmotional, " + ", var_ls_retweetNum_retweetExpressive, " + ", var_ls_retweetNum_control)
result_retweetNum_control <- glm(model_retweetNum_control, family = poisson(link = "log"), data = fullData)
result_retweetNum_rawpost <- glm(model_retweetNum_rawpost, family = poisson(link = "log"), data = fullData)
result_retweetNum_retweetEmotional <- glm(model_retweetNum_retweetEmotional, family = poisson(link = "log"), data = fullData)
result_retweetNum_retweetExpressive <- glm(model_retweetNum_retweetExpressive, family = poisson(link = "log"), data = fullData)
result_retweetNum_retweet <- glm(model_retweetNum_retweet, family = poisson(link = "log"), data = fullData)
result_retweetNum_full <- glm(model_retweetNum_full, family = poisson(link = "log"), data = fullData)
result_RawpostRetweetNum <- list(result_retweetNum_control, result_retweetNum_rawpost, result_retweetNum_retweetEmotional, result_retweetNum_retweetExpressive, result_retweetNum_retweet, result_retweetNum_full)
names(result_RawpostRetweetNum) <- c("Control Model", "Rawpost Model", "Retweet Emotional Model", "Retweet Expressive Model", "Retweet  Model",  "Full Model")
PR2_Num <- c(md("Pseudo R^2: McFadden"), as.numeric(pR2(result_retweetNum_control)[4]), as.numeric(pR2(result_retweetNum_rawpost)[4]), as.numeric(pR2(result_retweetNum_retweetEmotional)[4]), as.numeric(pR2(result_retweetNum_retweetExpressive)[4]), as.numeric(pR2(result_retweetNum_retweet)[4]), as.numeric(pR2(result_retweetNum_full)[4])) %>%
matrix(nrow = 1) %>%
as_tibble
names(PR2_Num) <- c("term", names(result_RawpostRetweetNum))
names_coef <- c(
"arm::rescale(rawpost_sentimentClassify)" = "Rawpost Sentiment(Categorical)",
"arm::rescale(text_numb)" = "Rawpost Complexity",
"diff_EventTime_RawPostTime" = "Event fever",
"arm::rescale(retweet_sentimentClassify)" = "Retweet Sentiment(Categorical)",
"Sentiment亲中" = "Pro-China(Continental)",
"Sentiment亲台" = "Pro-Taiwan",
"Sentiment批中" = "Anti-China(Continental)",
"Sentiment批台" = "Anti-Taiwan",
"Sentiment没有讨论政治事件" = "Irrelevant to politics",
"retweetCensorship合规" = "Retweet Censored Approved",
"discussPost" = "Discussion",
"warWolf" = "Wolf Warrior",
"dirty" = "Abuse",
"retweetGender男" = "Retweeter Gender: Male",
"retweetCertification蓝v" = "Retweeter Certification: Government",
"retweetCertification黄v" = "Retweeter Certification: Celebrity",
"arm::rescale(retweeterFansNum)" = "Retweeter's Fans Num.",
"arm::rescale(retweeterFollowNum)" = "Retweeter Followers Num.",
"arm::rescale(retweetDepth)" = "Depth of the Retweet Network",
"retweetDepth" = "Social Network Depth",
"similarity" = "Mobilized"
)
msummary(result_RawpostRetweetNum,
coef_map = names_coef,
stars = TRUE,
title = md("Why do people retweet state media more?"),
add_rows = PR2_Num
)
df_plot_num <- broom::tidy(result_retweetNum_full) %>%
filter(!str_detect(term, "retweetProvince|officalMediaName|officalMediaClassify|rawpostEvent|retweetRetweetNum|retweetCommentNum|retweetPostNum|diff_rawPostTime_RetweetPostTime"))
ls_brackets <- list(
c("Rawpost", "Rawpost Sentiment(Categorical)", "Rawpost Complexity", "Event fever"),
c("Retweet Emotional", "Retweet Sentiment(Categorical)", "Pro-China(Continental)", "Pro-Taiwan", "Anti-China(Continental)", "Anti-Taiwan", "Irrelevant to politics"),
c("Retweet Expressive", "Retweet Censored Approved", "Discussion", "Wolf Warrior", "Abuse", "Retweeter Gender: Male", "Retweeter Certification: Government", "Retweeter Certification: Celebrity", "Retweeter's Fans Num.", "Depth of the Retweet Network", "Mobilized"))
plot_RetweetNum <- {
dwplot(df_plot_num,
vline = geom_vline(
xintercept = 0,
colour = "grey60",
linetype = 2
)) %>%
relabel_predictors(names_coef) +
xlab("Coefficient Estimate") +
ggtitle("Why do people retweet state media more?")
} %>%
add_brackets(ls_brackets)
plot_RetweetNum
library(rvest)
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con .tit") %>%
html_attrs()
url
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con .tit") %>%
html_attrs()
read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85")
read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con .tit")
read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".tit")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".tit") %>%
html_attrs()
url
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".tit") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con .tit") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con .tit") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes("//*[contains(concat( " ", @class, " " ), concat( " ", "list-item-con", " " ))]//*[contains(concat( " ", @class, " " ), concat( " ", "tit", " " ))]") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".tit") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail .txt") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail .txt") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes("#.con-detail .txt") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail") %>%
html_nodes(".txt") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail") %>%
html_nodes(".txt")
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail")
read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail")
read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66")
read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66")[1]
read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66")[2]
print(read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66"))
url <- read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".con-detail .txt") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item:nth-child(1) .tit") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item:nth-child(1) .tit")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".txt-price-now , .list-item:nth-child(1) img")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes("#__next > div > div > div.innproducts-list-t2 > div:nth-child(8) > div.list-item-con > a")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_element("#__next > div > div > div.innproducts-list-t2 > div:nth-child(8) > div.list-item-con > a")
read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_element("#__next > div > div > div.innproducts-list-t2 > div:nth-child(8) > div.list-item-con > a")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_element("<a class="tit" href="/onlineinn/newdetail/1172394?d1=2021-05-17&amp;d2=2021-05-18&amp;channelId=66" target="_blank">佳昱民宿--明清土炕房</a>")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_element("//*[@id="__next"]/div/div/div[5]/div[8]/div[2]/a")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_element(//*[@id="__next"]/div/div/div[5]/div[8]/div[2]/a)
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_element("<a class="tit" href="/onlineinn/newdetail/1172394?d1=2021-05-17&amp;d2=2021-05-18&amp;channelId=66" target="_blank">佳昱民宿--明清土炕房</a>")
read_html("https://inn.ctrip.com/onlineinn/newdetail/15571095?d1=2021-05-17&d2=2021-05-18&channelId=66") %>%
html_nodes(".list-item-con .tit") %>%
html_text()
read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con .tit") %>%
html_text()
read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85")
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".list-item-con") %>%
html_text()
url <- read_html("https://inn.ctrip.com/onlineinn/newlist/jinzhong275_8-79251/?d2=2021-05-18&d1=2021-05-17&s=11&n=%E5%B9%B3%E9%81%A5%E5%8F%A4%E5%9F%8E%E5%86%85") %>%
html_nodes(".tit") %>%
html_text()
read_html("/Users/sunyufei/Desktop/晋中民宿客栈-晋中住宿公寓-携程民宿.html")
library(rvest)
read_html("/Users/sunyufei/Desktop/晋中民宿客栈-晋中住宿公寓-携程民宿.html") %>%
html_nodes(".list-item-con .tit") %>%
html_text()
url <- read_html("/Users/sunyufei/Desktop/晋中民宿客栈-晋中住宿公寓-携程民宿.html") %>%
html_nodes(".list-item-con .tit") %>%
html_attr()
read_html("/Users/sunyufei/Desktop/晋中民宿客栈-晋中住宿公寓-携程民宿.html") %>%
html_nodes(".list-item-con .tit") %>%
html_attrs()
url <- read_html("/Users/sunyufei/Desktop/晋中民宿客栈-晋中住宿公寓-携程民宿.html") %>%
html_nodes(".list-item-con .tit") %>%
html_attrs()
url <- read_html("/Users/sunyufei/Desktop/晋中民宿客栈-晋中住宿公寓-携程民宿.html") %>%
html_nodes(".list-item-con .tit") %>%
html_attrs()
url[1]
url[1][3]
url[[1]]
url[[1]][3]
url[[1]][2]
url[[1]][2][2]
url[[1]][2][1]
install.packages("regioncode")
?regioncode
??regioncode
DGDI <- read.csv("/Users/sunyufei/Desktop/DGDI.csv")
DGDI$CityNameChinese
regioncode::regioncode(DGDI$CityNameChinese, 2020, 2020, "name2code")
regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
View(DGDI)
regioncode::regioncode(九江, 2019, 2019, "name2code")
regioncode::regioncode(九江, 2018, 2019, "name2code")
regioncode::regioncode("九江市", 2018, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2018, 2019, "name2code")
View(DGDI)
DGDI$RegionCode <- regioncode::regioncode("九江", 2018, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2018, 2019, "name2code")
regioncode::regioncode("九江", 2018, 2019, "name2code")
regioncode::regioncode("九江市", 2018, 2019, "name2code")
regioncode::regioncode("洛阳市", 2018, 2019, "name2code")
regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
regioncode::regioncode("深圳", 2019, 2019, "name2code")
DGDI <- read.csv("/Users/sunyufei/Desktop/DGDI.csv")
regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2018, 2019, "name2code")
View(DGDI)
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI <- read.csv("/Users/sunyufei/Desktop/DGDI.csv")
regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI <- read.csv("/Users/sunyufei/Desktop/DGDI.csv")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2019, 2019, "name2code")
DGDI$RegionCode <- regioncode::regioncode(DGDI$CityNameChinese, 2018, 2019, "name2code")
DGDI$CityNameChinese
regioncode::regioncode(DGDI$CityNameChinese, 2018, 2019, "name2code")
length(DGDI$CityNameChinese)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
if (!require(pacman)) install.packages("pacman")
library(pacman)
p_load(grid,
gridExtra,
png,
magick,
usmap,
interplot,
dotwhisker,
modelsummary,
# Visualization
lubridate,
# Applied
broom,
knitr,
# dependency
scales,
tidyverse,
drhutools,
qs)
set.seed(19970921)
# Theme setup
theme_set(theme_minimal())
#Data input
n <- 1
regioncode::regioncode(DGDI$CityNameChinese[n], 2018, 2019, "name2code")
n <- 1
while (n < length(DGDI$CityNameChinese)) {
DGDI$RegionCode[n] <- regioncode::regioncode(DGDI$CityNameChinese[n], 2018, 2019, "name2code")
n <- n + 1
print(n)
}
View(DGDI)
regioncode::regioncode("珠海市", 2018, 2019, "name2code")
n <- 1
while (n < length(DGDI$CityNameChinese)) {
DGDI$RegionCode[n] <- regioncode::regioncode(DGDI$CityNameChinese[n], 2019, 2019, "name2code")
n <- n + 1
print(n)
}
n <- 1
while (n <= length(DGDI$CityNameChinese)) {
DGDI$RegionCode[n] <- regioncode::regioncode(DGDI$CityNameChinese[n], 2019, 2019, "name2code")
n <- n + 1
print(n)
}
View(DGDI)
write_csv(DGDI, "/Users/sunyufei/Desktop/DGDI.csv")
regioncode::regioncode("珠海市", 2019, 2019, "name2code")
regioncode::regioncode("佛山市", 2019, 2019, "name2code")
regioncode::regioncode("台州市", 2019, 2019, "name2code")
regioncode::regioncode("淮安市", 2019, 2019, "name2code")
regioncode::regioncode("淮安市", 2018, 2019, "name2code")
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan:::inf_mr()
shiny::runApp('Documents/Yufei_Sun/THU/projects/DscoreApp')
install.packages("feather_icons")
?feather_icons
??feather_icons
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan:::inf_mr()
